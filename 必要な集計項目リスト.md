# watch-market-analysis 必要な集計項目リスト

作成日: 2026-01-30
**完成日: 2026-01-30**

## 目的
HTMLの全タブで表示されているデータを正確に再生成するために、3つのCSVから何を集計する必要があるかを完全にリスト化する。

---

## タブの実際の順序（HTMLの251-273行目から確認）

1. 📊 全体分析 (overview)
2. ⚙️ 自動巻 (automatic)
3. 🔋 クオーツ (quartz)
4. ☀️ ソーラー (solar)
5. 🔧 手巻き (manual)
6. 📱 スマートウォッチ (smart)
7. 🔢 デジタル (digital)
8. 🔩 パーツ (parts)
9. 📦 まとめ売り (bundle)
10. ⭐ おすすめ出品順序 (recommend)
11. SEIKO
12. CASIO
13. OMEGA
14. CITIZEN
15. Orient
16. TAG HEUER
17. GUCCI
18. ROLEX
19. Hamilton
20. Longines
21. Cartier
22. RADO

**注意**: belt-material, case-material, dial-color, case-size のタブは、HTMLにコンテンツは存在するが、タブボタンが存在しないため表示されない。

---

## 追加タブ（タブボタンなし）

### belt-material (ベルト素材別)
### case-material (ケース素材別)
### dial-color (文字盤色別)
### case-size (ケースサイズ別)

**共通構造**:
- [ ] データ判別率（判別可能データ件数、全体件数、判別率%）
- [ ] 基本統計カード（8項目）: 総販売数、ユニークモデル数、平均価格、中央値、最高価格、総売上、CV値、仕入れ上限中央値
- [ ] グラフエリア（4グラフ）: ブランド別棒グラフ、ブランド別円グラフ、価格帯分布、属性別円グラフ
- [ ] ブランド別集計テーブル（Top20）: ブランド、販売数、最低価格、最高価格、中央値($)、中央値(¥)、仕入上限(¥)、CV値、検索リンク

**集計方法**:
- タイトルから「レザー」「ステンレス」「ゴールド」「ブラック」「38mm」などのキーワードで属性を抽出
- 判別不可能なものは「不明」として除外

---

## 1. 全体分析タブ (overview)

### 基本統計（4項目）
- [ ] 総販売数（販売数列の合計）
- [ ] 総売上（価格×販売数の合計）
- [ ] 平均価格
- [ ] 中央値価格

### 市場インサイト
- [ ] ブランド別販売数Top2（ブランド名と件数）
- [ ] 駆動方式別平均価格（最高価格の2つを特定）
- [ ] パーツ市場の件数

### 駆動方式別分析（グラフ2つ）
- [ ] 各駆動方式の販売数（クオーツ、スマートウォッチ、ソーラー、デジタル、手巻き、自動巻）

### ブランド別分析（グラフ2つ）
- [ ] Top20ブランドの販売数
- [ ] Top10ブランドの販売数

### 月別推移
- [ ] 月×駆動方式の販売数（2025-12, 2026-01）

### 価格帯分布
- [ ] 価格帯別の件数（区切り方: $0-100, $100-200, $200-300, $300-500, $500-1000, $1000+）

---

## 2-7. 駆動方式タブ（6個）
- automatic (自動巻)
- quartz (クオーツ)
- solar (ソーラー)
- manual (手巻き)
- smart (スマートウォッチ)
- digital (デジタル)

**現状**: タブボタンは存在するが、コンテンツdiv（`<div id="automatic" class="tab-content">`など）は未実装

### 必要な集計項目（推奨構造）

#### 基本統計（4項目）
- [ ] 総販売数
- [ ] 中央値価格
- [ ] CV値（変動係数）
- [ ] 該当駆動方式の全体比率

#### ブランド別分析
- [ ] Top10ブランドの販売数、中央値、CV値

#### 価格帯分析
- [ ] 価格帯別販売数（$0-100, $100-200, $200-300, $300-500, $500-1000, $1000+）

#### 人気モデルTop30
- [ ] 型番、ブランド、販売数、中央値、仕入上限、CV値、検索リンク

**集計方法**:
- 駆動方式列でフィルタ（例: 駆動方式="自動巻"）
- ブランド別にグループ化して統計計算

---

## 8. パーツタブ (parts)

### パーツ種類別統計（8種類）
- [ ] その他パーツの件数と中央値
- [ ] バックル/クラスプの件数と中央値
- [ ] バンド/ストラップの件数と中央値
- [ ] ベゼルの件数と中央値
- [ ] リンク/コマの件数と中央値
- [ ] 文字盤の件数と中央値
- [ ] 竜頭の件数と中央値
- [ ] 箱・ケースの件数と中央値

### ブランド別パーツ需要（Top10）
- [ ] ブランド名
- [ ] 販売数
- [ ] 中央値（ドル）
- [ ] 中央値（円）
- [ ] 仕入上限（円の70%）
- [ ] 検索リンク（eBay/メルカリ）

**集計方法**:
- カテゴリ="パーツ"でフィルタ
- タイトルから「その他パーツ」「バックル」「ベルト」「ベゼル」「リンク」「文字盤」「竜頭」「箱」などのキーワードでパーツ種類を分類
- ブランド別にTop10を抽出

---

## 9. まとめ売りタブ (bundle)

### 基本統計（4項目）
- [ ] 総販売数（販売数列の合計）
- [ ] 取引件数（出品数）
- [ ] 中央値価格
- [ ] 平均価格

### インサイト
- [ ] まとめ売りの特徴（3つのポイントを文章で表示）

**集計方法**:
- タイトルに「まとめ」「セット」「lot」などのキーワードが含まれるものを抽出
- または販売数が2以上のもの（要確認）

---

## 10. おすすめ出品順序タブ (recommend)

### 回転重視モード
- [ ] 条件説明（CV値、仕入上限、月間販売数の閾値）
- [ ] ランキングテーブル（順位、ブランド、駆動方式、販売数/月、中央値、仕入上限、安定度、スコア）

### 利益重視モード
- [ ] 条件説明（トレンド係数、スコア計算式）
- [ ] ランキングテーブル（順位、ブランド、駆動方式、販売数、中央値、仕入上限、トレンド、リスク、スコア）

**集計方法**:
- 回転重視: CV値≤0.3、仕入上限≤¥30,000、月間販売数≥3の商品をフィルタ
- 利益重視: 全商品を対象に、トレンド係数（直近1ヶ月販売数/過去6ヶ月平均）を計算
- スコア = 仕入上限 × 販売数 × トレンド係数

---

## 11-22. ブランドタブ（12個）
- SEIKO
- CASIO
- OMEGA
- CITIZEN
- Orient
- TAG HEUER
- GUCCI
- ROLEX
- Hamilton
- Longines
- Cartier
- RADO

**実装状況（2026-01-30時点、commit 080d3be）**:
- ✅ 実装済み（17ブランド）: SEIKO, CASIO, OMEGA, CITIZEN, Orient, GUCCI, ROLEX, Hamilton, Longines, Cartier, RADO, Swatch, BREITLING, NIXON, Tissot, DIOR
- ❌ 未実装（3ブランド）: TAG HEUER, ISSEY MIYAKE, SAINT LAURENT

**実装済みスクリプト**: rebuild_seiko_v3_complete.py, rebuild_casio_v3_complete.py, rebuild_citizen_v3_complete.py, rebuild_orient_v3_complete.py

### 必要な集計項目（全ブランド共通）

#### 1. 基本統計（4項目）
- [ ] 総販売数
- [ ] 中央値価格
- [ ] CV値（変動係数）
- [ ] 型番抽出率（型番が判別できたデータの割合）

#### 2. 仕入れ戦略ガイド
- [ ] 狙い目条件（人気ライン、駆動方式、付属品など）
- [ ] 避けるべき条件（リスク商品の特徴）
- [ ] 仕入れ価格目安（通常モデル、人気ラインの上限）

#### 3. 市場分析グラフ（4グラフ）
- [ ] 価格帯別分析（50ドル刻み）
- [ ] 駆動方式別分布（円グラフ）
- [ ] 性別・カテゴリー別分布（円グラフ）
- [ ] ライン別売上比率（円グラフ）

#### 4. 特別版・限定モデル分析
- [ ] 特別版商品数
- [ ] 中央値価格
- [ ] 全体比率
- [ ] 特別版テーブル: 特別版名、販売数、比率、中央値、仕入上限、検索リンク

#### 5. 各ラインの人気モデル（実データより）Top15
- [ ] ライン別にTop15モデルをリスト
- [ ] 各モデル: 順位、型番、販売数、中央値、仕入上限、CV値、商品例、検索リンク

#### 6. ライン別詳細分析（全ライン）
- [ ] ライン名、販売数、比率、中央値、仕入上限、CV値、安定度、検索リンク

#### 7. 全ライン横断 型番分析Top30
- [ ] 順位、型番、販売数、中央値、仕入上限、CV値、検索リンク

**集計方法**:
- ブランド列でフィルタ（例: ブランド="SEIKO"）
- タイトルから型番を抽出（正規表現）
- タイトルからライン分類（ブランド固有のキーワード）
- 特別版判定: タイトルに「Limited」「Anniversary」「Chronograph」「Gold」などが含まれる

---

## 次のステップ

### ✅ 完了
1. ✅ 各タブのHTMLを読んで、必要な集計項目を追記する
   - 全体分析タブ: 完了
   - 駆動方式タブ（6個）: 推奨構造を記載
   - パーツタブ: 完了
   - まとめ売りタブ: 完了
   - おすすめ出品順序タブ: 完了
   - ブランドタブ（12個）: 完了（Tissotタブの構造を参考）
   - 追加タブ（4個）: 完了

### 🔄 次のアクション
2. 3つのCSVファイルから実際のユニーク値を分析（Step 0.5）
   - 商品状態（商品状態列）のユニーク値
   - 駆動方式（駆動方式列）のユニーク値
   - カテゴリ（カテゴリ列）のユニーク値
   - パーツ種類（タイトルからキーワード抽出）
   - ベルト素材、ケース素材、文字盤色、ケースサイズ（タイトルからキーワード抽出）

3. 集計ルールの定義（Step 1）
   - 「1件」の定義（出品数 vs 販売数）
   - フィルタ条件（商品状態の扱い）
   - 正規化ルール（ブランド名の統一など）

4. 中間集計CSVの生成（Step 2-4）
   - HTMLに必要な全データポイントを含む
   - 検証可能な形式

5. HTMLの再生成（Step 5）
   - 中間CSVから全タブを生成
   - 既存HTMLとの差分分析（なぜ数値が違うか）
